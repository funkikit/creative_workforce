## 3. アーキテクチャ概要図（Mermaid）
```mermaid
flowchart LR
    subgraph User
        UI[Next.js 会話UI<br/>tRPCクライアント]
    end

    subgraph Backend[FastAPI + LangGraph]
        ChatAPI[/Chat API/]
        ArtifactAPI[/Artifacts API/]
        ProgressAPI[/Progress API/]
        ImageQueue[TaskQueueService<br/>(Cloud Tasks / Redis)]
        Agents[成果物エージェント群]
    end

    subgraph Services
        Storage[StorageService<br/>(GCS / MinIO)]
        VectorDB[VectorStoreService<br/>(Vertex AI / Qdrant)]
        DB[(PostgreSQL<br/>Cloud SQL / Local)]
        Gemini[Gemini 2.5 Flash Image API]
    end

    UI -->|tRPC| ChatAPI
    UI -->|成果物閲覧/編集| ArtifactAPI
    UI -->|不足資材確認| ProgressAPI
    ChatAPI --> Agents
    ArtifactAPI --> Agents
    Agents -->|テンプレ生成| ArtifactAPI
    Agents -->|状況更新| ProgressAPI
    Agents --> DB
    Agents --> VectorDB
    Agents --> Storage
    ArtifactAPI --> Storage

    ArtifactAPI -->|原画生成依頼| ImageQueue
    ImageQueue -->|ジョブ実行| Gemini
    Gemini -->|生成画像| Storage
    Gemini -->|生成プロンプト記録| DB
    ProgressAPI -->|不足判定| DB
    ArtifactAPI -->|履歴参照| DB
```