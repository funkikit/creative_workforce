# Creative Workforce Console 操作ガイド（最新版 UI）

最終更新: 2025-02-14  
Tailwind ベースの `AppShell` レイアウトに統一されたフロントエンドの操作手順をまとめます。

## 1. レイアウトの全体像

| エリア | 概要 | 主なコンポーネント |
| --- | --- | --- |
| ヘッダー | 「Console」バッジと説明テキスト、ドキュメント導線を配置 | `AppShell` ヘッダー |
| サイドバー（デスクトップ） | プロジェクト作成フォームとプロジェクト一覧をカード形式で表示 | `ProjectSidebar` |
| ヒーローセクション | サマリーカード（登録済みプロジェクト数 / 生成済み成果物 / 未完了テンプレート） | `DashboardHero` |
| メインコンテンツ | プロジェクト概要、生成パネル、成果物一覧、進捗、プレビュー、チャットを縦スクロールで配置 | `ProjectOverview`, `GenerationPanel`, `ArtifactTable`, `ProgressSummary`, `ArtifactPreview`, `ChatPanel` |
| メッセージ領域 | 操作結果をバナー表示（成功/警告/エラー） | `AppShell.message` スロット |

モバイルではサイドバーがヒーロー下に折りたたまれ、成果物プレビューはチャット手前に移動するレスポンシブ構成です。

## 2. 主要アクションと挙動

| UI要素 | 役割 | バックエンドとの連携 |
| --- | --- | --- |
| プロジェクト作成フォーム | 新規プロジェクト登録 | `POST /api/projects` |
| プロジェクトカード | プロジェクト切替 | `GET /api/projects/{id}/artifacts`, `GET /api/projects/{id}/progress` を並行フェッチ |
| テンプレートボタン | 成果物生成 | `POST /api/projects/{id}/artifacts/{template}/generate` |
| キュー待ちバナー | 画像生成タスクの保留通知 | `keyframe_image` 生成時に 202 応答で表示、`POST /api/tasks/generate-keyframe` で即時処理 |
| 成果物テーブルの「表示」 | 成果物プレビュー | `GET /api/projects/{id}/artifacts/{artifactId}` |
| 進捗サマリー | 完了/未完了テンプレートを視覚化 | Progress API のレスポンスをチップ表示 |
| 会話セッション | tRPC チャットの操作 | `trpc.chat.listSessions` / `listMessages` / `sendMessage` |

## 3. 操作フロー（例）

1. **プロジェクトの新規登録**  
   サイドバーのフォームで名称・説明・予定話数を入力し `作成`。成功すると自動的に新規プロジェクトが選択されます。

2. **成果物を生成**  
   生成指示を入力しテンプレートボタンを押下。エピソード系テンプレートは番号を指定。完了後、成果物テーブルに即時反映されます。

3. **キーフレーム画像の処理**  
   `キーフレーム画像` を生成後、バナーに従い `ワーカーを実行` を押してシミュレート。プレビューで画像を確認できます。

4. **進捗の把握と未完了テンプレートの生成**  
   ProgressSummary のチップで未完了テンプレートを確認し、順次生成します。

5. **会話エージェントとのやり取り**  
   `新しいセッション` でプロジェクト紐付けのチャットを作成し、指示や進捗確認をチャット経由で実施。イベントログに成果物更新などが記録されます。

## 4. 補足

- すべての成果物プレビューはダークテーマを前提にレイアウトされ、画像は `next/image` で最適化されます。
- フォームのバリデーションは HTML 標準 (`required`, `min=1`) に加え、バックエンド側で Pydantic による検証が行われます。
- メッセージバナーは最新操作の結果のみ表示。詳細ログはブラウザコンソールを確認してください。
- カラーパレットは `tailwind.config.ts` の `brand` カラーを基点にトークン化済みです。

---
詳細な技術仕様・API 一覧は `documents/creative_workforce-system-spec.md` を参照してください。
