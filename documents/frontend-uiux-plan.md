# Creative Workforce PoC Console UI/UX 概要と改善計画

## 1. 現状 UI/UX 仕様

### 1.1 目的と対象ユーザー
- **目的**: プロジェクト作成、成果物生成、ワーカー実行という PoC の主要ユースケースを検証するための技術者向けデバッグコンソール。
- **利用者像**: バックエンド/エージェント開発者、PM、PoC デモ運用者。一般ユーザーやクライアント向け想定ではない。

### 1.2 画面構成と主要コンポーネント
- **ヘッダー**: タイトルとコンソールの説明文のみ。ナビゲーションやブランド要素は未実装。
- **プロジェクト作成フォーム**: `Name / Description / Episodes` の 3 項目と `Create` ボタン。バリデーションは HTML 既定 (`required`, `min=1`) のみ。
- **Projects リスト**: 取得済みプロジェクトをボタンリストで表示。選択するとハイライトされ、以降のセクションにコンテキストが渡る。
- **Artifacts セクション**:
  - テンプレート生成ボタン群（テキスト/画像向け）。`instructions` と `episode` の入力欄。
  - キーフレーム生成がキューに入った場合はバナーを表示し、ワーカートリガーボタンを提示。
  - 下部に成果物一覧テーブル（テンプレートコード／エピソード／バージョン／表示ボタン）。
- **Artifact Preview**: 選択した成果物のテキスト/画像プレビュー。Binary の場合は base64 画像を描画。
- **Progress Overview**: グローバルテンプレートとエピソード別の完了/未完了テンプレートをシンプルに表示。
- **メッセージエリア**: 成功/失敗を青系トースト風メッセージで提示。エラー種別ごとの差別化は未実装。

### 1.3 インタラクションとデータフロー
1. 初回レンダリング時に `/api/projects` をフェッチし最初のプロジェクトを選択。
2. プロジェクト選択時に `artifacts` と `progress` をそれぞれフェッチ。
3. 成果物生成:
   - テキスト系は同期レスポンスを期待し、完了後に Artifact リストを再取得。
   - 画像系（`keyframe_image`）は `202 Accepted` 時にキュー待ち状態を保持し、ワーカーボタンで `POST /api/tasks/generate-keyframe` を呼ぶ。
4. Artifact 表の `View` クリックで詳細を表示。

### 1.4 技術スタックとスタイル
- Next.js App Router (`app/page.tsx`)、クライアントコンポーネントのみで構成。
- Tailwind 風ユーティリティクラスを直書き（ただし Tailwind 設定は PoC 用暫定）。テーマ/デザインシステムは未確立。
- 状態管理は React `useState` と `useEffect` のみ。GLobal store やキャッシュレイヤー無し。
- API 通信は `fetch` 直呼び。API ベース URL は `NEXT_PUBLIC_API_BASE_URL` 環境変数で切り替え。

### 1.5 現状の UX 特性
- 画面は単一ページで、主要アクションが縦スクロールで並列に配置。
- 成功/エラー表示はメッセージ欄に文字列のみ。詳細なエラー解説や再実行導線は未整備。
- ローディング中のビジュアルは既存ボタンの `disabled` のみで、スケルトンやスピナーは無し。
- アクセシビリティ: 基本的なフォームラベルはあるが、ARIA 属性やフォーカス管理は未対応。
- レスポンシブ: 狭幅で単一カラムになるが、コンポーネント間の余白調整・可読性は最小限。

## 2. 課題と改善要否
- **認知負荷**: テンプレート名が内部コードのままで、生成結果や用途が分かりづらい。
- **状態把握**: フェッチ/生成中の進捗が見えず、HTTP エラーがすべて同じメッセージで扱われる。
- **情報設計**: プロジェクト概要やテンプレート説明、成果物メタ情報（作成者・更新日時）がない。
- **操作導線**: 「まず何をすればいいか」のガイダンスが不足。プロジェクト選択が空のときに誘導文がない。
- **再利用性**: コンポーネント化やスタイルトークンがないため、UI 拡張時の保守コストが高い。
- **アクセシビリティ**: キーボード操作やスクリーンリーダー向けの配慮が不足。
- **信頼性**: API 応答エラー時に詳細が表示されず、デバッグが難しい。

## 3. 改善計画

### フェーズ 0: 基盤整備（1 週間）
1. **デザインシステム軽量版の導入**: 色/タイポ/スペーシングのトークン定義と `Button`, `Card`, `Alert` など原子的コンポーネントを `frontend/components/` に作成。
2. **API レイヤー共通化**: `frontend/lib/api.ts` などで `fetch` ラッパー、エラーハンドリング、ローディング状態を統一。
3. **CORS/環境変数の明記**: `.env.local` テンプレート更新とガイド明確化（既に backend 側対応済み、frontend ガイドも追記）。

### フェーズ 1: UX クイックウィン（1–2 週間）
1. **オンボーディングガイド**: Hero セクションに「使い方」チュートリアルカード、プロジェクトが 0 件のときの空状態メッセージを追加。
2. **ステータス表示**: 成果物生成やフェッチ操作にスピナー/スケルトンとトースト通知（成功/警告/エラー）を導入。
3. **テンプレートの説明付与**: ボタンにツールチップや副題を追加し、期待されるアウトプット例を表示。
4. **エラーの可視化**: API エラーメッセージをパースし、ユーザーフレンドリーに表示。リトライ導線を備える。

### フェーズ 2: 情報設計のブラッシュアップ（2–3 週間）
1. **レイアウト再設計**: サイドバー + メインコンテンツ構成に刷新し、プロジェクト詳細カード、成果物タブを整理。
2. **アクティビティログ**: 成果物生成履歴やワーカー実行ログをタイムライン形式で表示。
3. **プレビュー強化**: テキスト成果物の Markdown レンダリング、画像はカルーセル/ズーム対応。ダウンロード操作をサポート。
4. **フィルタリング/検索**: 成果物リストにテンプレート/エピソード/ステータスのフィルターを追加。

### フェーズ 3: ブランド表現とアクセシビリティ（継続）
1. **ビジュアルテーマ**: ロゴ・カラーパレット・共通ヘッダー/フッターを整備し、PoC からサービス向けプロトタイプへ進化。
2. **アクセシビリティ監査**: Lighthouse/axe による検証、キーボード操作とスクリーンリーダー対応の改善。
3. **国際化対応**: i18n 基盤を導入し、多言語ラベル切り替えを検証。

### フェーズ 4: 観察と継続的改善
1. **ユーザーテスト**: チーム内デザイナー/PM との操作レビューを行い、摩擦ポイントを洗い出す。
2. **計測体制**: 将来的な利用データ取得に備え、イベントロギング（仮）を設計。
3. **ロードマップ更新**: 改善完了後に学びをまとめ、次フェーズの要件（例: ワークフロー設定、権限管理 UI）を策定。

## 4. 必要な追加リソース
- デザイン: Figma での UI キット作成と画面遷移図。
- 開発: Next.js/Tailwind/Headless UI 等に精通したフロントエンド開発者 1–2 名。
- QA: 浏览器互換性・アクセシビリティテストを実施できる担当。

---

この計画に沿って段階的に改善することで、「PoC の動作確認コンソール」から「顧客デモにも耐える UX」への進化を狙える。優先度の高いクイックウィンから着手し、機能拡張とブランド体験の両立を目指す。***
